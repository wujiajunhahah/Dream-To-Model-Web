{% extends "base.html" %}

{% block title %}联系我们 - 梦境建模系统{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">联系我们</h2>
        </div>
        
        <div class="card-body">
            <div class="contact-info">
                <div class="contact-method">
                    <i class="fas fa-envelope"></i>
                    <h3>邮件支持</h3>
                    <p>support@dreammodel.com</p>
                    <p>工作时间：周一至周五 9:00-18:00</p>
                </div>
                
                <div class="contact-method">
                    <i class="fas fa-phone"></i>
                    <h3>电话支持</h3>
                    <p>400-123-4567</p>
                    <p>工作时间：周一至周五 9:00-18:00</p>
                </div>
                
                <div class="contact-method">
                    <i class="fas fa-comments"></i>
                    <h3>在线客服</h3>
                    <p>工作时间：周一至周五 9:00-18:00</p>
                    <button class="btn btn-primary" onclick="startChat()">
                        <i class="fas fa-comment-dots"></i>
                        开始对话
                    </button>
                </div>
            </div>
            
            <div class="contact-form">
                <h3>发送消息</h3>
                <form id="contactForm">
                    <div class="form-group">
                        <label for="name" class="form-label">姓名</label>
                        <input type="text" id="name" name="name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="form-label">邮箱</label>
                        <input type="email" id="email" name="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject" class="form-label">主题</label>
                        <input type="text" id="subject" name="subject" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="message" class="form-label">消息内容</label>
                        <textarea id="message" name="message" class="form-control" rows="5" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            发送消息
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="faq-section">
                <h3>常见问题</h3>
                <div class="faq-list">
                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>如何开始使用梦境建模系统？</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>首先需要注册一个账号，然后登录系统。在首页点击"创建梦境"按钮，输入你的梦境描述，系统会自动分析并生成3D模型。</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>生成的模型可以下载吗？</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>是的，所有生成的模型都可以下载。你可以在个人中心或模型库中找到你的模型，点击下载按钮即可保存到本地。</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>如何修改个人信息？</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>登录后进入个人中心，点击"账号设置"标签，在这里你可以修改用户名、邮箱和密码等信息。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// FAQ展开/收起
document.querySelectorAll('.faq-question').forEach(question => {
    question.addEventListener('click', () => {
        const answer = question.nextElementSibling;
        const icon = question.querySelector('i');
        
        answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
        icon.classList.toggle('fa-chevron-up');
        icon.classList.toggle('fa-chevron-down');
    });
});

// 表单提交
document.getElementById('contactForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = form.querySelector('button[type="submit"]');
    
    // 禁用提交按钮并显示加载状态
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 发送中...';
    
    try {
        const response = await fetch('/api/contact', {
            method: 'POST',
            body: new FormData(form)
        });
        
        const data = await response.json();
        
        if (data.success) {
            alert('消息已发送，我们会尽快回复你！');
            form.reset();
        } else {
            alert(data.error || '发送失败，请重试');
        }
    } catch (error) {
        console.error('发送消息失败:', error);
        alert('发送失败，请重试');
    } finally {
        // 恢复提交按钮状态
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> 发送消息';
    }
});

// 在线客服
function startChat() {
    // 这里可以集成第三方客服系统
    alert('在线客服功能正在开发中，敬请期待！');
}
</script>
{% endblock %} 