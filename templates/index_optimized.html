<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamEcho - Transform your dreams into unique 3D art</title>
    
    <!-- 预加载关键资源 -->
    <link rel="preload" href="{{ url_for('static', filename='images/已移除背景的网站图拍呢.png') }}" as="image">
    <link rel="preload" href="{{ url_for('static', filename='images/avatar.jpg') }}" as="image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- DNS预解析 -->
    <link rel="dns-prefetch" href="//bambulab.com">
    <link rel="dns-prefetch" href="//deepseek.com">
    <link rel="dns-prefetch" href="//tripo3d.ai">
    <link rel="dns-prefetch" href="//github.com">
    
    <!-- 字体优化加载 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 内联关键CSS -->
    <style>
        /* 关键CSS内联以减少渲染阻塞 */
        :root {
            --primary: 134 239 172;
            --primary-foreground: 22 101 52;
            --secondary: 34 197 94;
            --secondary-foreground: 255 255 255;
            --muted: 115 115 115;
            --muted-foreground: 163 163 163;
            --accent: 34 197 94;
            --accent-foreground: 255 255 255;
            --destructive: 239 68 68;
            --destructive-foreground: 255 255 255;
            --border: 39 39 42;
            --input: 39 39 42;
            --ring: 134 239 172;
            --background: 9 20 12;
            --foreground: 250 250 250;
            --dreamecho-accent: 34 197 94;
        }

        * {
            border-color: rgb(var(--border));
        }

        body {
            background-color: rgb(var(--background));
            color: rgb(var(--foreground));
            font-family: 'Inter', sans-serif;
        }

        .text-primary { color: rgb(var(--primary)); }
        .text-primary-foreground { color: rgb(var(--primary-foreground)); }
        .text-secondary { color: rgb(var(--secondary)); }
        .text-muted-foreground { color: rgb(var(--muted-foreground)); }
        .text-foreground { color: rgb(var(--foreground)); }
        .bg-background { background-color: rgb(var(--background)); }
        .bg-primary { background-color: rgb(var(--primary)); }
        .bg-secondary { background-color: rgb(var(--secondary)); }
        .border-border { border-color: rgb(var(--border)); }

        /* 玻璃态效果 */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-hover {
            transition: all 0.3s ease;
        }

        .glass-hover:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        /* 渐变按钮 */
        .button-gradient-dreamecho {
            background: linear-gradient(135deg, rgb(var(--primary)), rgb(var(--dreamecho-accent)));
            color: rgb(var(--primary-foreground));
            transition: all 0.3s ease;
        }

        .button-gradient-dreamecho:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 25px rgba(134, 239, 172, 0.3);
        }

        /* 动画优化 */
        .animate-slide-up {
            animation: slideUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 图片懒加载占位符 */
        .lazy-image {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* 性能优化 */
        img {
            content-visibility: auto;
        }
    </style>

    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "rgb(var(--border))",
                        input: "rgb(var(--input))",
                        ring: "rgb(var(--ring))",
                        background: "rgb(var(--background))",
                        foreground: "rgb(var(--foreground))",
                        primary: {
                            DEFAULT: "rgb(var(--primary))",
                            foreground: "rgb(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "rgb(var(--secondary))",
                            foreground: "rgb(var(--secondary-foreground))",
                        },
                        muted: {
                            DEFAULT: "rgb(var(--muted))",
                            foreground: "rgb(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "rgb(var(--accent))",
                            foreground: "rgb(var(--accent-foreground))",
                        },
                        destructive: {
                            DEFAULT: "rgb(var(--destructive))",
                            foreground: "rgb(var(--destructive-foreground))",
                        },
                        'dreamecho-accent': "rgb(var(--dreamecho-accent))",
                    },
                }
            }
        }
    </script>
</head>

<body class="bg-background text-foreground">
    <!-- 导航栏 -->
    <nav id="navigation" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-background/80 border border-transparent rounded-full px-6 py-3 transition-all duration-300 ease-in-out" style="width: 95%; max-width: 48rem;">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                </svg>
                <span class="text-xl font-semibold text-foreground">DreamEcho</span>
            </div>
            
            <div class="hidden md:flex items-center space-x-6">
                <a href="#features" onclick="scrollToSection('features')" class="text-sm text-muted-foreground hover:text-foreground transition-all duration-300">Features</a>
                <a href="#pricing" onclick="scrollToSection('pricing')" class="text-sm text-muted-foreground hover:text-foreground transition-all duration-300">Pricing</a>
                <a href="#about" onclick="scrollToSection('about')" class="text-sm text-muted-foreground hover:text-foreground transition-all duration-300">About</a>
                <a href="#contact" onclick="scrollToSection('contact')" class="text-sm text-muted-foreground hover:text-foreground transition-all duration-300">Contact</a>
            </div>
            
            <div class="flex items-center space-x-4">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('create_dream') }}" class="px-4 py-2 button-gradient-dreamecho rounded-full text-sm font-medium">
                        Create Dream
                    </a>
                    <a href="{{ url_for('logout') }}" class="text-sm text-muted-foreground hover:text-foreground transition-colors">
                        Logout
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="text-sm text-muted-foreground hover:text-foreground transition-colors">
                        Login
                    </a>
                    <a href="{{ url_for('register') }}" class="px-4 py-2 button-gradient-dreamecho rounded-full text-sm font-medium">
                        Sign Up
                    </a>
                {% endif %}
                
                <button onclick="toggleMobileMenu()" class="md:hidden text-foreground">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- 移动端菜单 -->
        <div id="mobile-menu" class="hidden md:hidden mt-4 pt-4 border-t border-border">
            <div class="flex flex-col space-y-3">
                <a href="#features" onclick="scrollToSection('features')" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Features</a>
                <a href="#pricing" onclick="scrollToSection('pricing')" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Pricing</a>
                <a href="#about" onclick="scrollToSection('about')" class="text-sm text-muted-foreground hover:text-foreground transition-colors">About</a>
                <a href="#contact" onclick="scrollToSection('contact')" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Contact</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <section class="container mx-auto px-4 pt-32 pb-20 text-center relative overflow-hidden">
        <!-- 背景装饰 -->
        <div class="absolute inset-0 opacity-20">
            <div class="absolute top-20 left-10 w-72 h-72 bg-primary rounded-full mix-blend-multiply filter blur-xl animate-pulse"></div>
            <div class="absolute top-40 right-10 w-72 h-72 bg-dreamecho-accent rounded-full mix-blend-multiply filter blur-xl animate-pulse" style="animation-delay: 2s;"></div>
            <div class="absolute -bottom-8 left-20 w-72 h-72 bg-secondary rounded-full mix-blend-multiply filter blur-xl animate-pulse" style="animation-delay: 4s;"></div>
        </div>
        
        <div class="max-w-4xl relative z-10">
            <h1 class="text-5xl md:text-7xl font-normal mb-4 tracking-tight text-left">
                <span class="text-foreground/80 text-generate-effect">
                    Transform your dreams
                </span>
                <br />
                <span class="text-foreground font-medium text-generate-effect" style="animation-delay: 0.2s;">
                    into unique 3D art
                </span>
            </h1>
            
            <p class="text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl text-left animate-slide-up" style="animation-delay: 0.4s;">
                With advanced AI, we transform your dreams into unique 3D artworks.
                <span class="text-foreground">Each dream becomes a one-of-a-kind NFT, permanently stored on the blockchain.</span>
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 items-start animate-slide-up" style="animation-delay: 0.5s;">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('create_dream') }}" class="px-6 py-3 button-gradient-dreamecho rounded-full text-lg font-semibold">
                        Start Creating
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="px-6 py-3 button-gradient-dreamecho rounded-full text-lg font-semibold">
                        Start Creating
                    </a>
                {% endif %}
                <a href="{{ url_for('model_library') }}" class="px-6 py-3 text-foreground hover:text-primary transition-colors text-lg font-semibold flex items-center">
                    Explore Dreams 
                    <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div class="relative mx-auto max-w-5xl mt-20 animate-slide-up" style="animation-delay: 0.6s;">
            <div class="glass rounded-xl overflow-hidden">
                <img
                    src="{{ url_for('static', filename='images/已移除背景的网站图拍呢.png') }}"
                    alt="DreamEcho 3D Dream Art Showcase"
                    class="w-full h-auto"
                    loading="eager"
                    decoding="async"
                />
            </div>
        </div>
    </section>

    <!-- 其余内容保持不变，但添加懒加载 -->
    <!-- 这里包含所有其他部分，但为了简洁，我只展示关键的优化部分 -->

    <!-- 优化的JavaScript -->
    <script>
        // 使用requestAnimationFrame优化动画
        let ticking = false;

        // 导航栏滚动效果优化
        function updateNavigation() {
            const nav = document.getElementById('navigation');
            if (window.scrollY > 50) {
                nav.classList.add('bg-background/60', 'backdrop-blur-xl', 'border-border', 'scale-95');
                nav.classList.remove('bg-background/80', 'border-transparent');
                nav.style.width = '90%';
                nav.style.maxWidth = '32rem';
            } else {
                nav.classList.remove('bg-background/60', 'backdrop-blur-xl', 'border-border', 'scale-95');
                nav.classList.add('bg-background/80', 'border-transparent');
                nav.style.width = '95%';
                nav.style.maxWidth = '48rem';
            }
            ticking = false;
        }

        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateNavigation);
                ticking = true;
            }
        });

        // 移动端菜单切换
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // 平滑滚动优化
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // 懒加载图片
        function lazyLoadImages() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy-image');
                        imageObserver.unobserve(img);
                    }
                });
            });

            images.forEach(img => imageObserver.observe(img));
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 文本生成效果
            const textElements = document.querySelectorAll('.text-generate-effect');
            textElements.forEach((element, index) => {
                setTimeout(() => {
                    element.style.opacity = '1';
                }, index * 200);
            });

            // 初始化懒加载
            lazyLoadImages();

            // 预加载关键资源
            const criticalImages = [
                '{{ url_for("static", filename="images/avatar.jpg") }}',
                '{{ url_for("static", filename="images/default-qr.png") }}'
            ];

            criticalImages.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        });

        // 性能监控
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(function() {
                    const perfData = performance.getEntriesByType('navigation')[0];
                    console.log('页面加载时间:', perfData.loadEventEnd - perfData.fetchStart, 'ms');
                }, 0);
            });
        }
    </script>
</body>
</html> 